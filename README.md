# 值班表管理系统

## 项目简介

这是一个基于 Flask 框架开发的值班表管理系统，旨在方便管理员管理和普通用户查看值班安排。系统实现了用户认证、权限控制、排班初始化、排班更新、拖拽对调以及员工管理等功能，并考虑了节假日和特定排班规则。

## 功能特性

* **用户认证：** 支持管理员和普通用户通过用户名和密码登录。
* **权限控制：** 管理员拥有初始化、更新、拖拽排班和管理员工的完整权限；普通用户仅能查看。
* **排班管理：**
    * **初始化排班：** 为指定年份生成全年值班表，考虑工作日、节假日以及“莫”不在周一的规则。
    * **更新排班：** 允许管理员指定开始日期，添加新员工或标记现有员工为无效。
    * **删除员工处理：** 标记员工为无效后，系统自动将该员工未来班次重新分配给其他有效员工。
    * **拖拽对调：** 管理员可以在日历视图中通过拖拽来调整值班人员。
* **员工管理：** 管理员可以添加新员工（如果已存在则更新状态为有效），并设置员工状态（有效/无效）。
* **数据展示：** 以日历视图展示全年值班表，不同人员用不同颜色区分。
* **节假日处理：** 系统依赖 `holidays` 表中的节假日数据，这份数据需要手工维护。

## 技术栈

* Python
* Flask
* SQLite
* HTML
* CSS
* JavaScript

## 运行步骤

1.  **克隆仓库：**
    ```bash
    git clone [你的 GitHub 仓库链接]
    cd duty_schedule_app
    ```

2.  **安装依赖：**
    ```bash
    pip install Flask flatpickr
    ```

3.  **初始化数据库：**
    运行 `database.py` 文件来创建和初始化数据库。
    ```bash
    python database.py
    ```

4.  **运行应用程序：**
    ```bash
    python app.py
    ```
    应用程序将在 `http://127.0.0.1:5000/` 上运行。

5.  **访问系统：**
    在浏览器中打开 `http://127.0.0.1:5000/` 并使用以下凭据登录进行测试：
    * **管理员：** `admin` / `admin123`
    * **普通用户：** `user` / `user123`

## 文件结构